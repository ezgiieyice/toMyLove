<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>30 GÃ¼ndÃ¼r Melisam ğŸ’— + AnÄ±lar</title>
  <style>
    :root{
      --bg1:#0b1020; --bg2:#111a33;
      --card: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.65);
      --shadow: 0 18px 60px rgba(0,0,0,.35);
      --r: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background: radial-gradient(900px 500px at 20% 10%, rgba(255,120,200,.18), transparent 60%),
                  radial-gradient(800px 500px at 80% 20%, rgba(120,180,255,.18), transparent 55%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
      display:flex; align-items:center; justify-content:center;
      padding:24px;
    }
    .wrap{width:min(980px, 100%); display:grid; gap:16px}
    .top{display:flex; gap:14px; align-items:stretch; flex-wrap:wrap;}
    .card{
      background:var(--card);
      border:1px solid var(--stroke);
      border-radius:var(--r);
      box-shadow:var(--shadow);
      backdrop-filter: blur(10px);
    }
    .hero{flex: 1 1 460px; padding:18px 18px 14px}
    .side{flex: 0 0 320px; padding:18px}
    h1{margin:0 0 6px; font-size:22px; letter-spacing:.2px}
    .sub{color:var(--muted); font-size:14px; line-height:1.45}
    .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:12px}
    input{
      flex:1 1 220px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.18);
      color:var(--text);
      border-radius:12px;
      padding:11px 12px;
      outline:none;
    }
    button{
      border:1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.10);
      color:var(--text);
      padding:11px 12px;
      border-radius:12px;
      cursor:pointer;
    }
    button:hover{background: rgba(255,255,255,.14)}
    .pill{
      display:inline-flex; gap:8px; align-items:center;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      padding:8px 10px; border-radius:999px;
      font-size:12px; color:var(--muted);
    }
    .progress{
      height:10px; border-radius:999px;
      background: rgba(255,255,255,.08);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.14);
      margin-top:12px;
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(255,140,210,.9), rgba(120,190,255,.9));
    }

    .main{display:grid; grid-template-columns: 1.3fr .7fr; gap:16px}
    @media (max-width: 860px){ .main{grid-template-columns:1fr} .side{flex:1 1 320px}}

    .message{padding:18px}
    .dayTitle{display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap}
    .big{font-size:18px; margin:0}
    .tag{font-size:12px; color:var(--muted)}
    .text{
      margin:12px 0 0;
      font-size:16px;
      line-height:1.65;
      white-space:pre-wrap;
    }

    .days{padding:18px}
    .grid{
      display:grid; grid-template-columns: repeat(5, minmax(0,1fr));
      gap:10px;
    }
    @media (max-width: 560px){ .grid{grid-template-columns: repeat(4, minmax(0,1fr));} }

    .d{
      padding:10px 10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      display:flex; justify-content:center; align-items:center;
      cursor:pointer;
      user-select:none;
      min-height:40px;
      position:relative;
    }
    .d.locked{opacity:.45; cursor:not-allowed}
    .d.active{
      border-color: rgba(255,255,255,.35);
      background: rgba(255,255,255,.12);
    }
    .d.hasPhoto::after{
      content:"ğŸ“·";
      position:absolute;
      right:8px; top:8px;
      font-size:12px;
      opacity:.85;
    }

    /* ğŸŒ» Bouquet (5 ayÃ§iÃ§eÄŸi) */
    .flowerBox{display:flex; flex-direction:column; gap:10px}

    .flower.bouquet{
      height:240px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      position:relative;
      overflow:hidden;
    }

    .sun{
      position:absolute;
      bottom:0;
      left:var(--x,50%);
      transform: translateX(-50%);
      width:140px;
      height:240px;
      --g: .2; /* grow */
      --b: .2; /* bloom */
    }

    .sun .head{
      position:absolute;
      left:50%;
      bottom:120px;
      width:120px;
      height:120px;
      transform: translateX(-50%) scale(var(--b)) rotate(var(--tilt, 0deg));
      transform-origin: 50% 70%;
      animation: sway var(--spd, 5s) ease-in-out infinite;
      filter: drop-shadow(0 8px 18px rgba(0,0,0,.25));
    }

    @keyframes sway{
      0%,100% { transform: translateX(-50%) scale(var(--b)) rotate(calc(var(--tilt,0deg) - 15.5deg)); }
      50%     { transform: translateX(-50%) scale(var(--b)) rotate(calc(var(--tilt,0deg) + 25.5deg)); }
    }

    .sun .petals{
      position:absolute; inset:0;
      border-radius:50%;
      background: repeating-conic-gradient(
        from 0deg,
        #fbc02d 0deg 10deg,
        #ffe082 10deg 20deg
      );
    }

    .sun .core{
      position:absolute;
      left:50%; top:50%;
      width:42px; height:42px;
      transform: translate(-50%,-50%);
      border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #6d4c41, #3e2723);
      box-shadow: inset 0 0 0 3px rgba(255,255,255,.05);
    }

    .sun .stem{
      position:absolute;
      left:50%;
      bottom:0;
      width:10px;
      height:160px;
      transform: translateX(-50%) scaleY(var(--g));
      transform-origin: bottom;
      border-radius:999px;
      background: linear-gradient(180deg, #66bb6a, #2e7d32);
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.20));
    }

    .sun .leaf{
      position:absolute;
      width:46px; height:26px;
      background: linear-gradient(180deg, rgba(120,255,170,.9), rgba(40,170,120,.9));
      border-radius: 60% 40% 55% 45% / 60% 45% 55% 40%;
      opacity:.95;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.18));
    }
    .sun .leaf.l1{ left:50%; bottom:45px; transform: translateX(-90%) rotate(-18deg) scale(var(--g)); transform-origin: left center; }
    .sun .leaf.l2{ left:50%; bottom:70px; transform: translateX(-10%) rotate(22deg)  scale(var(--g)); transform-origin: right center; }

    .sun.s1{ --x: 18%; --tilt:-6deg; --spd: 3.2s; }
    .sun.s2{ --x: 34%; --tilt: 2deg; --spd: 3.6s; }
    .sun.s3{ --x: 50%; --tilt:-1deg; --spd: 3.4s; }
    .sun.s4{ --x: 66%; --tilt: 5deg; --spd: 3.8s; }
    .sun.s5{ --x: 82%; --tilt:-3deg; --spd: 3.3s; }


    .hint{color:var(--muted); font-size:12px; line-height:1.45}
    .footer{color:var(--muted); font-size:12px; padding:0 4px}

    /* Modal */
    .modalBack{
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:center; justify-content:center;
      padding:18px;
      z-index: 9999;
    }
    .modal{
      width:min(820px, 100%);
      background: rgba(20,28,55,.92);
      border:1px solid rgba(255,255,255,.16);
      border-radius: 18px;
      box-shadow: 0 24px 80px rgba(0,0,0,.45);
      overflow:hidden;
    }
    .modalHead{
      display:flex; justify-content:space-between; align-items:center;
      padding:12px 14px;
      border-bottom: 1px solid rgba(255,255,255,.12);
    }
    .modalTitle{font-size:14px; color: var(--text)}
    .closeBtn{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color: var(--text);
      border-radius: 12px;
      padding:8px 10px;
      cursor:pointer;
    }
    .modalBody{padding:14px; display:grid; gap:12px}
    .modalNote{color: rgba(255,255,255,.85); line-height:1.55; white-space:pre-wrap}
    .modalImg{
      width:100%;
      max-height: 420px;
      object-fit: cover;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      display:none;
    }

    /* Polaroid kenarlar */
    .edgePolaroids{
      position: fixed;
      top: 50%;
      transform: translateY(-50%);
      display: grid;
      gap: 14px;
      z-index: 1;
      pointer-events: none;
      opacity: .95;
    }
    .edgePolaroids.left{ left: 18px; }
    .edgePolaroids.right{ right: 18px; }

    .edgePolaroid{
      width: 170px;
      background: rgba(255,255,255,.92);
      border-radius: 14px;
      padding: 10px 10px 14px;
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
      transform: rotate(var(--rot, -2deg));
    }
    .edgePolaroid img{
      width: 100%;
      height: 145px;
      object-fit: cover;
      border-radius: 10px;
      display: block;
    }

    /* Ä°Ã§erik Ã¼stte */
    .wrap{ position: relative; z-index: 5; }

    /* KÃ¼Ã§Ã¼k ekranlarda kenar polaroidleri kapat (PC web odaklÄ±) */
    @media (max-width: 1200px){
      .edgePolaroids{ display:none; }
    }
  </style>
</head>

<body>
  <!-- Sol grup -->
  <div class="edgePolaroids left">
    <div class="edgePolaroid" style="--rot:-4deg"><img src="photos/left1.jpeg" alt="anÄ±"></div>
    <div class="edgePolaroid" style="--rot:2deg"><img src="photos/left2.jpeg" alt="anÄ±"></div>
    <div class="edgePolaroid" style="--rot:-1deg"><img src="photos/left3.jpeg" alt="anÄ±"></div>
  </div>

  <!-- SaÄŸ grup -->
  <div class="edgePolaroids right">
    <div class="edgePolaroid" style="--rot:3deg"><img src="photos/right1.jpeg" alt="anÄ±"></div>
    <div class="edgePolaroid" style="--rot:-3deg"><img src="photos/right2.jpeg" alt="anÄ±"></div>
    <div class="edgePolaroid" style="--rot:1deg"><img src="photos/right3.jpeg" alt="anÄ±"></div>
  </div>

  <div class="wrap">
    <div class="top">
      <div class="card hero">
        <h1>30 GÃ¼ndÃ¼r Melisamla</h1>
        <div class="sub">Bir ay boyunca her gÃ¼n kÃ¼Ã§Ã¼k bir ÅŸeylerâ€¦</div>

        <div class="row" id="gate">
          <input id="nameInput" placeholder="Ä°smini yaz (minik bir kontrol ğŸ˜Œ)" autocomplete="off" />
          <button id="enterBtn">BaÅŸlat</button>
          <span class="pill" id="gateMsg">â€œSen olmasaydÄ±n Ã§alÄ±ÅŸmazdÄ±.â€</span>
        </div>

        <div class="progress" aria-label="progress">
          <div class="bar" id="bar"></div>
        </div>

        <div class="row" style="margin-top:10px">
          <span class="pill" id="dayPill">GÃ¼n: â€”</span>
          <span class="pill" id="datePill">BaÅŸlangÄ±Ã§: â€”</span>
          <span class="pill" id="leftPill">Kalan: â€”</span>
        </div>
      </div>

      <div class="card side">
        <div class="flowerBox">
          <div class="flower bouquet" id="bouquet">
            <div class="sun s1"><div class="stem"></div><div class="head"><div class="petals"></div><div class="core"></div></div><div class="leaf l1"></div><div class="leaf l2"></div></div>
            <div class="sun s2"><div class="stem"></div><div class="head"><div class="petals"></div><div class="core"></div></div><div class="leaf l1"></div><div class="leaf l2"></div></div>
            <div class="sun s3"><div class="stem"></div><div class="head"><div class="petals"></div><div class="core"></div></div><div class="leaf l1"></div><div class="leaf l2"></div></div>
            <div class="sun s4"><div class="stem"></div><div class="head"><div class="petals"></div><div class="core"></div></div><div class="leaf l1"></div><div class="leaf l2"></div></div>
            <div class="sun s5"><div class="stem"></div><div class="head"><div class="petals"></div><div class="core"></div></div><div class="leaf l1"></div><div class="leaf l2"></div></div>
          </div>
          <div class="hint">Ä°pucu: Her gÃ¼n girince Ã§iÃ§ek biraz daha aÃ§Ä±yor. ğŸŒ™</div>
        </div>
      </div>
    </div>

    <div class="main">
      <div class="card message">
        <div class="dayTitle">
          <p class="big" id="msgTitle">BaÅŸlamak iÃ§in ismini yaz.</p>
          <span class="tag" id="msgTag"></span>
        </div>
        <div class="text" id="msgText">BugÃ¼nlÃ¼k mesajÄ± birlikte aÃ§alÄ±m ğŸ™‚</div>
      </div>

      <div class="card days">
        <div class="sub" style="margin-bottom:10px">GÃ¼nler</div>
        <div class="grid" id="grid"></div>
        <div class="footer" style="margin-top:12px">Not: Gelecek gÃ¼nler kilitli. ZamanÄ± gelince aÃ§Ä±lÄ±r ğŸ˜Œ</div>
      </div>
    </div>

    <div class="main" style="margin-top:16px">
      <div class="card message">
        <div class="dayTitle">
          <p class="big">AnÄ±lar</p>
          <span class="tag">12 KasÄ±m â†’ 29 AralÄ±k</span>
        </div>
        <div class="text" id="timelineText"></div>
      </div>

      <div class="card days">
        <div class="sub" style="margin-bottom:10px">Birlikte olduÄŸumuz gÃ¼nler (25 KasÄ±m â€“ 29 AralÄ±k)</div>
        <div class="grid" id="togetherGrid"></div>
        <div class="footer" style="margin-top:12px">
          ğŸ’— = Ã¶zel gÃ¼n (ilk buluÅŸma + sevgili olma). ğŸ‘­ = diÄŸer birlikte olduÄŸunuz gÃ¼nler. ğŸ“· = foto var. TÄ±kla: not + foto aÃ§Ä±lÄ±r.
        </div>
      </div>
    </div>
  </div>

  <div class="modalBack" id="modalBack" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modalHead">
        <div class="modalTitle" id="modalTitle">â€”</div>
        <button class="closeBtn" id="closeBtn">Kapat</button>
      </div>
      <div class="modalBody">
        <img class="modalImg" id="modalImg" alt="AnÄ± fotoÄŸrafÄ±" />
        <div class="modalNote" id="modalNote"></div>
      </div>
    </div>
  </div>

<script>
  // âœ… SADECE BU KISIMLARI DÃœZENLE
  const HER_NAME = "BAL";      // Ã¶r: "MELÄ°SA" veya lakap
  const START_DATE = "2025-11-29";  // 30 gÃ¼nlÃ¼k mesajlarÄ±n baÅŸlayacaÄŸÄ± gÃ¼n

  const M = [
    "BugÃ¼n bu sayfayÄ± aÃ§tÄ±ysanâ€¦ sistemi baÅŸlattÄ±k demektir. Beraber olduÄŸumuz her gÃ¼n bir not mantÄ±ÄŸÄ±nda hepsini okuyalÄ±m balÄ±m.",
    "GÃ¼lÃ¼ÅŸÃ¼n benim en sevdiklerimden.",
    "BugÃ¼n seni dÃ¼ÅŸÃ¼ndÃ¼m. (Her saniye aklÄ±mdasÄ±n yanlÄ±ÅŸ anlaÅŸÄ±lmasÄ±n)\nSonra bir daha.",
    "Seninleyken zaman Ã§ok hÄ±zlanÄ±yor.\nÄ°lk gÃ¼n daha dÃ¼n gibi..",
    "BugÃ¼n sadece ÅŸunu bil:\nO ellerini Ä±sÄ±rÄ±rÄ±m.",
    "Mini gÃ¶rev: Ezgi'yi gÃ¼zelce Ã¶p. Biraz deÄŸil bayaaa uÄŸraÅŸÄ±yor.\nBekliyorum <3",
    "Ã–pÃ¼cÃ¼k yetmemiÅŸ Ã¶yle dicek ben biliyorum... Bir kere daha Ã¶pp",
    "Seninle konuÅŸmadan sadece otursak bile Ã§ok keyifli.",
    "BarbekÃ¼'ye senmiÅŸsin gibi sarÄ±lÄ±yorum. Bal'Ä± senmiÅŸsin gibi kokluyorum.",
    "Bazen saÃ§ma cÃ¼mleler kuruyorum yaâ€¦ \nÄ°Ã§imdeki â€œseni seviyorumâ€u saklamak iÃ§in.",
    "Bence seninle hayat daha â€œsoftâ€ (yumuÅŸak).",
    "Sen kalbime Ã§ok Ã§atkapÄ± geldin. NapÄ±cazzzz.",
    "TatlÄ± bir gerÃ§ek:\nBen sana baÄŸÄ±mlÄ± oluyorum.",
    "Sana sarÄ±lmaya bir isim koyucam.\nÃ‡Ã¼nkÃ¼ bu unfair.",
    "YarÄ± yol:\nBu flower bir tek sana aÃ§Ä±yor.",
    "Senden gitmek hiÃ§ istemiyorum.",
    "Bana yemek yedirir misin hepp? Tamam hep deÄŸil de yanii bÃ¶yle birazz bazenn... (tÃ¼rkÃ§em yok manitacÄ±lÄ±k yaparken)",
    "Seni sevmeyi Ã§ok seviyorum. O ayaklarÄ±nÄ± sÃ¼rtÃ¼ÅŸÃ¼ne Ã¶lÃ¼rÃ¼mm. AaÄŸÄŸÄŸÄŸÄŸÄŸÄŸÄŸÄŸ Ä±sÄ±rmak istedim ÅŸuan seni.",
    "Seninle BAYAA ciddi dÃ¼ÅŸÃ¼nÃ¼yorum",
    "KÄ±sa ve net:\nSen benim BalÄ±msÄ±n.",
    "Mini GÃ¶rev:\nÄ°nÅŸallah-maÅŸallah-subhanallah kashfjksa beÄŸeniyorsundur ya.. BeÄŸeniyosan da fazla ÅŸÄ±marma tm mÄ±?? Bu hep olmazz da...\nÅaka ÅŸakaaa. Daha gÃ¼zel fikirler gelir benim aklÄ±ma..\n Ezgiyi Ã¶pme zamanÄ±...",
    "Biraz kendime Ã¶vgÃ¼Ã¼.. KÄ±zÄ±m ben yaÅŸadÄ±m eyvallahta sen de yaÅŸadÄ±n heee. Buldun kÄ±zÄ± valla....(O araplarÄ± sikerim)",
    "Sen heppp konuÅŸÅŸ ben sabaha kadar dinlerim seniii.",
    "TatlÄ± hatÄ±rlatma:\nKimseye bu kadar not yazmadÄ±m hayatÄ±mda. Sana ÅŸuan bayÄ±la bayÄ±la yapÄ±yorum bunu..Bilgin olsun <3",
    "Seninle yan yana olmak bile yeter.",
    "Terlik giymediÄŸimde kÄ±zmana, bana elinle yemekler yedirmeneee, beni benden Ã§ok dÃ¼ÅŸÃ¼ndÃ¼ÄŸÃ¼nÃ¼ farketmemi saÄŸlayacak kadarr bana deÄŸer verdiÄŸini gÃ¶rmek\naÄŸÄŸÄŸ eriyorum.",
    "Sokakta yÃ¼rÃ¼rken elini sÄ±kÄ±ca tutmak is my love language",
    "RE45 artÄ±k hayatÄ±mÄ±n main parÃ§alarÄ±ndan birisi  :D:D:D",
    "Son gÃ¼nler son cÃ¼mlemizzz.. HazÄ±r mÄ±sÄ±n??----> Seni seviyorum.",
    "Final:\nBu 30 gÃ¼n sadece kÃ¼Ã§Ã¼k bir fragmandÄ±.\nAsÄ±l hikÃ¢yeâ€¦ daha baÅŸlamadÄ± bilee."
  ];

  const MEMORY_EVENTS = [
    { date: "2025-11-12", title: "TanÄ±ÅŸma", note: "O malum gÃ¼n :) (appte kaydÄ±rmacalÄ±)" },
    { date: "2025-11-25", title: "Ä°lk buluÅŸma", note: "S-bahn'dan yanÄ±ma gelene kadarki anlar komediydi." },
    { date: "2025-11-29", title: "ğŸ‘‰ğŸ‘ˆ", note: "Fazla sÃ¶ze gerek yok." },
    { date: "2025-12-29", title: "1. ay", note: "Bir ay deÄŸilâ€¦ TamamlanmÄ±ÅŸ gibi." },
  ];

  const HEART_DATES = ["2025-11-25","2025-11-29"];

  const TOGETHER_DATES = [
    "2025-11-25","2025-11-26","2025-11-28","2025-11-29","2025-11-30",
    "2025-12-01","2025-12-02","2025-12-05","2025-12-06","2025-12-07",
    "2025-12-08","2025-12-09","2025-12-10","2025-12-11","2025-12-12",
    "2025-12-13","2025-12-14","2025-12-15","2025-12-16","2025-12-17",
    "2025-12-19","2025-12-20","2025-12-21","2025-12-22","2025-12-23",
    "2025-12-24","2025-12-25",
  ];

  const TOGETHER_NOTES = {
    "2025-11-25": "Ä°lk buluÅŸmaaa <3 Karlsruhedeyiz",
    "2025-11-26": "O gece yanÄ±nda kalmaya sÃ¼rÃ¼kledi hanÄ±mefendii. Kendisine bayÄ±lmasam gitmezdim ona gÃ¶ree yani (Heilbronn) â€” sabah dÃ¶ndÃ¼m :( ",
    "2025-11-28": "Cumaa ders Ã§Ä±kÄ±ÅŸÄ± Heilbronnâ€™a geldim",
    "2025-11-29": "Heilbronn Weihnachtsmarkt gezmesi yaptÄ±k akÅŸammğŸ„.Bana kendi sevdiÄŸin ve denememi isteediÄŸin ÅŸeyleri tattÄ±rmann Ã§ok gÃ¼zeldii. En Ã§ok seni beÄŸendim ama bennn",
    "2025-11-30": "HeilbronndayÄ±z yine Pazar gÃ¼nÃ¼ evdeyizz.",
    "2025-12-01": "Sabah ben Karlsruheâ€™ye dÃ¶ndÃ¼m, sen iÅŸe gittin (HeilbronndayÄ±z hala)",
    "2025-12-02": "Ve ertesi SalÄ±Ä±Ä±...Ä°ÅŸ Ã§Ä±kÄ±ÅŸÄ± sen yanÄ±ma geldin. Biraz da burada Weihnachtsmarkt :D:D DÃ¶nme dolaba bindikk, Ã§okk gÃ¼zeldi. Ä°lk kez bindim ben normalde korkarÄ±m...",
    "2025-12-05": "Cuma gÃ¼nÃ¼Ã¼ sen geldin 6 kg su getirmiÅŸsin amk kÄ±zdÄ±m ona Ã§ok neyse.. Sana Tavuklu makarna biÅŸiler yaptÄ±m  + Sonra hande erÃ§el bokumsu filmini izledik askfjasklfj Ha bir de sos yaptÄ±n sen dip sos iyiydi aÅŸkm hep yap bÃ¶yle ÅŸeyler ğŸğŸ¬",
    "2025-12-06": "Ertesi gÃ¼n Heilbronna gittik: kÃ¼tÃ¼phane date (Milira ile tanÄ±ÅŸtÄ±mm) ğŸ“š",
    "2025-12-07": "Pazar HeilbronndayÄ±z yine :D â€” evdeydik, bugun naptÄ±k bulamadÄ±m yaa.",
    "2025-12-08": "Sen iÅŸe her zmmnki gibii, ben de erkenden Karlsruheâ€™ye dÃ¶ndÃ¼m (yurtta amk stocku gÃ¶revlisiydim)",
    "2025-12-09": "Ertesi gÃ¼n ders Ã§Ä±kÄ±ÅŸÄ±Ä± yanÄ±naaa Heilbronnâ€™a geldim. KÄ±zÄ±m boÅŸ gÃ¼nÃ¼mÃ¼z yokk ne bu birlikte olmuÅŸuz her gÃ¼nn",
    "2025-12-10": "Sen evden remote Ã§alÄ±ÅŸtÄ±nn hÄ±hahahahahÄ±hÄ±hh (kÃ¶tÃ¼ gÃ¼lÃ¼ÅŸ)",
    "2025-12-11": "ArkadaÅŸlarÄ±nla tanÄ±ÅŸmaca: Melisa, Hodeige âœ¨",
    "2025-12-12": "DÃ¶nmÃ¼ÅŸÃ¼z beraber ",
    "2025-12-13": "Bowling akÅŸamÄ± ğŸ³ â€” Heilbronaa git gel yaptÄ±k :D Karlsruheâ€™ye birlikte dÃ¶nÃ¼ÅŸ",
    "2025-12-14": "Birlikteydik pazarr gÃ¼nÃ¼Ã¼",
    "2025-12-15": "Sabahh sen Karlsruheâ€™den iÅŸe gittin",
    "2025-12-16": "Heilbronn'a geldimm iÅŸ Ã§Ä±kÄ±ÅŸÄ±naa â€” bana Ã§iÃ§ek aldÄ±n ğŸŒ¸",
    "2025-12-17": "KalÄ±pp yurda dÃ¶ndÃ¼m",
    "2025-12-19": "Sen Karlsruheâ€™ye geldin",
    "2025-12-20": "Ä°lk sinema datemizz. Avatar izledikk bayÄ±ldÄ±m ğŸ¬",
    "2025-12-21": "AkÅŸam Heilbronnâ€™a birlikte geldik",
    "2025-12-22": "Heilbronn",
    "2025-12-23": "Heilbronn",
    "2025-12-24": "Heilbronn â€” Brownii yaptÄ±kkk ğŸ„. Normalde bu akÅŸam gidecektin ama sabah gitmeyi tercih ettin ve ben Ã§okk mutlu olmuÅŸtummmm. Bir gece daha beraber uyudukk.",
    "2025-12-25": "Sen iÅŸe.. baÅŸka ÅŸehiree, ben Karlsruheâ€™ye dÃ¶ndÃ¼m",
  };

  const PHOTO_BY_DATE = {
    // "2025-11-25": "photos/2025-11-25-firstdate.jpg",
    // "2025-11-29": "photos/2025-11-29-market.jpg",
    // "2025-12-16": "photos/2025-12-16-flower.jpg",
    // "2025-12-20": "photos/2025-12-20-cinema.jpg",
  };

  const TOGETHER_RANGE_START = "2025-11-25";
  const TOGETHER_RANGE_END   = "2025-12-29";

  // =======================
  // AÅAÄISI OTOMATÄ°K
  // =======================
  const DAYS = 30;
  const norm = s => (s||"").toString().trim().toLocaleUpperCase("tr-TR");
  const byId = id => document.getElementById(id);

  function localMidnightFromYMD(ymd){
    const [y,m,d] = ymd.split("-").map(Number);
    return new Date(y, m-1, d, 0,0,0,0);
  }
  function todayLocalMidnight(){
    const t = new Date();
    return new Date(t.getFullYear(), t.getMonth(), t.getDate(), 0,0,0,0);
  }
  function clamp(n,min,max){ return Math.max(min, Math.min(max, n)); }

  function computeDay(startYMD){
    const start = localMidnightFromYMD(startYMD);
    const now = todayLocalMidnight();
    const diffMs = now - start;
    return Math.floor(diffMs / 86400000) + 1;
  }

  function fmtTR(ymd){
    const [y,m,d] = ymd.split("-").map(Number);
    const dt = new Date(y, m-1, d);
    return dt.toLocaleDateString("tr-TR", { day:"2-digit", month:"long" });
  }

  function listRange(startYMD, endYMD){
    const s = localMidnightFromYMD(startYMD);
    const e = localMidnightFromYMD(endYMD);
    const out = [];
    for(let t = new Date(s); t <= e; t = new Date(t.getTime()+86400000)){
      const y = t.getFullYear();
      const m = String(t.getMonth()+1).padStart(2,"0");
      const d = String(t.getDate()).padStart(2,"0");
      out.push(`${y}-${m}-${d}`);
    }
    return out;
  }

  // elements
  const nameInput = byId("nameInput");
  const enterBtn = byId("enterBtn");
  const gateMsg = byId("gateMsg");

  const msgTitle = byId("msgTitle");
  const msgTag = byId("msgTag");
  const msgText = byId("msgText");
  const grid = byId("grid");

  const bar = byId("bar");
  const dayPill = byId("dayPill");
  const datePill = byId("datePill");
  const leftPill = byId("leftPill");

  const bouquet = byId("bouquet");

  // modal
  const modalBack = byId("modalBack");
  const closeBtn = byId("closeBtn");
  const modalTitle = byId("modalTitle");
  const modalNote = byId("modalNote");
  const modalImg = byId("modalImg");

  let unlocked = false;
  let selectedDay = 1;

  function setBouquet(grow, bloom){
    if(!bouquet) return;
    bouquet.querySelectorAll(".sun").forEach((el, idx) => {
      const w = [0.92, 0.98, 1.06, 0.98, 0.92][idx] ?? 1;
      el.style.setProperty("--g", (grow * w).toFixed(3));
      el.style.setProperty("--b", (bloom * w).toFixed(3));
    });
  }

  function openModal(ymd){
    const title = `${fmtTR(ymd)}${HEART_DATES.includes(ymd) ? " ğŸ’—" : (TOGETHER_DATES.includes(ymd) ? " ğŸ‘­" : "")}`;
    modalTitle.textContent = title;

    modalNote.textContent = TOGETHER_NOTES[ymd] ? TOGETHER_NOTES[ymd] : "Bu gÃ¼n iÃ§in kÃ¼Ã§Ã¼k bir not ekleyebilirsin ğŸ™‚";

    const imgPath = PHOTO_BY_DATE[ymd];
    if(imgPath){
      modalImg.src = imgPath;
      modalImg.style.display = "block";
    } else {
      modalImg.removeAttribute("src");
      modalImg.style.display = "none";
    }

    modalBack.style.display = "flex";
    modalBack.setAttribute("aria-hidden","false");
  }

  function closeModal(){
    modalBack.style.display = "none";
    modalBack.setAttribute("aria-hidden","true");
  }
  closeBtn.addEventListener("click", closeModal);
  modalBack.addEventListener("click", (e)=>{ if(e.target === modalBack) closeModal(); });
  document.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeModal(); });

  function renderMemories(){
    const el = byId("timelineText");
    if(!el) return;
    el.textContent = MEMORY_EVENTS
      .sort((a,b)=> a.date.localeCompare(b.date))
      .map(ev => `â€¢ ${fmtTR(ev.date)} â€” ${ev.title}\n  ${ev.note}`)
      .join("\n\n");
  }

  function renderTogetherCalendar(){
    const grid = byId("togetherGrid");
    if(!grid) return;

    const all = listRange(TOGETHER_RANGE_START, TOGETHER_RANGE_END);
    const set = new Set(TOGETHER_DATES);

    grid.innerHTML = "";
    for(const ymd of all){
      const b = document.createElement("div");
      const isTogether = set.has(ymd);
      const isHeart = HEART_DATES.includes(ymd);
      const hasPhoto = Boolean(PHOTO_BY_DATE[ymd]);

      b.className = "d" + ((isTogether || isHeart) ? " active" : "") + (hasPhoto ? " hasPhoto" : "");
      const dayNum = ymd.slice(8,10);

      if (isHeart) b.textContent = `ğŸ’— ${dayNum}`;
      else if (isTogether) b.textContent = `ğŸ‘­ ${dayNum}`;
      else b.textContent = dayNum;

      const note = TOGETHER_NOTES[ymd] ? ` â€” ${TOGETHER_NOTES[ymd]}` : "";
      const badge = isHeart ? " ğŸ’—" : (isTogether ? " ğŸ‘­" : "");
      b.title = `${fmtTR(ymd)}${badge}${note}${hasPhoto ? " (foto var)" : ""}`;

      b.onclick = () => openModal(ymd);
      grid.appendChild(b);
    }
  }

  function render(){
    datePill.textContent = "BaÅŸlangÄ±Ã§: " + START_DATE;

    if(!unlocked){
      msgTitle.textContent = "BaÅŸlamak iÃ§in ismini yaz.";
      msgTag.textContent = "";
      msgText.textContent = "BugÃ¼nlÃ¼k mesajÄ± birlikte aÃ§alÄ±m ğŸ™‚";
      dayPill.textContent = "GÃ¼n: â€”";
      leftPill.textContent = "Kalan: â€”";
      bar.style.width = "0%";
      setBouquet(0.12, 0.12);
      grid.innerHTML = "";
      return;
    }

    const dayNow = computeDay(START_DATE);

    if(dayNow <= 0){
      const daysTo = Math.abs(dayNow) + 1;
      msgTitle.textContent = "HenÃ¼z zamanÄ± deÄŸil ğŸ˜Œ";
      msgTag.textContent = "BaÅŸlamasÄ±na: " + daysTo + " gÃ¼n";
      msgText.textContent =
        "Bu sayfa, doÄŸru gÃ¼n geldiÄŸinde aÃ§Ä±lacak.\n" +
        "Ama ÅŸimdiden ÅŸunu sÃ¶yleyeyim:\n" +
        "Sen olmasaydÄ±n Ã§alÄ±ÅŸmazdÄ±.";
      dayPill.textContent = "GÃ¼n: 0";
      leftPill.textContent = "Kalan: " + DAYS;
      bar.style.width = "0%";
      setBouquet(0.14, 0.14);
      grid.innerHTML = "";
      return;
    }

    const available = clamp(dayNow, 1, DAYS);
    selectedDay = clamp(selectedDay, 1, available);

    dayPill.textContent = "GÃ¼n: " + available + "/" + DAYS;
    leftPill.textContent = "Kalan: " + (DAYS - available);
    bar.style.width = (available / DAYS * 100).toFixed(1) + "%";

    const grow = 0.10 + (available / DAYS) * 0.90;
    const bloom = 0.12 + (available / DAYS) * 0.88;
    setBouquet(grow, bloom);

    msgTitle.textContent = "GÃ¼n " + selectedDay;
    msgTag.textContent = selectedDay === available ? "BugÃ¼nÃ¼n mesajÄ±" : "Ã–nceki gÃ¼n";
    msgText.textContent = M[selectedDay-1];

    grid.innerHTML = "";
    for(let i=1;i<=DAYS;i++){
      const b = document.createElement("div");
      b.className = "d" + (i>available ? " locked" : "") + (i===selectedDay ? " active" : "");
      b.textContent = i;
      b.onclick = () => {
        if(i>available) return;
        selectedDay = i;
        render();
      };
      grid.appendChild(b);
    }
  }

  function tryEnter(){
    const typed = norm(nameInput.value);
    unlocked = true;
    gateMsg.textContent = typed ? ("BileÅŸen bulundu: " + typed + " âœ…") : "BileÅŸen bulundu âœ…";
    renderMemories();
    renderTogetherCalendar();
    render();
  }

  enterBtn.addEventListener("click", tryEnter);
  nameInput.addEventListener("keydown", (e)=>{ if(e.key==="Enter") tryEnter(); });

  renderMemories();
  renderTogetherCalendar();
  render();
</script>
</body>
</html>
